<div class="comunicacao-wrapper" [class.dark-mode]="modoEscuro()">

  <!-- ÃREA DA MENSAGEM CONSTRUÃDA -->
  <section class="mensagem-area">

    <h2 class="mensagem-titulo">Mensagem ConstruÃ­da</h2>

    <!-- Lista de pictogramas adicionados -->
    <div class="mensagem-pictos">
      @for (item of pictogramasSelecionados(); track item.pictograma.id) {
        <div class="picto-item">
          <div class="picto-emoji">{{ item.pictograma }}</div>
          <span class="picto-label">{{ item.pictograma.label }}</span>
        </div>
      }
    </div>

    <!-- Texto completo -->
    <div class="mensagem-texto">
      {{ textoCompleto() }}
    </div>

    <!-- AÃ§Ãµes -->
    <div class="mensagem-acoes">
      <button class="btn btn-falar" (click)="falarMensagem()">ðŸ”Š Falar</button>
      <button class="btn btn-limpar" (click)="limparSelecao()">ðŸ§¹ Limpar</button>
    </div>
  </section>

  <!-- CATEGORIAS -->
  <section class="categorias-area">
    @for (categoria of categorias(); track categoria.id) {
      <button
        class="categoria-btn"
        [class.active]="categoriaSelecionada()?.id === categoria.id"
        [style.background-color]="categoria.cor"
        (click)="selecionarCategoria(categoria)">
        {{ categoria.nome }}
      </button>
    }
  </section>

  <!-- LISTA DE PICTOGRAMAS -->
  <section class="pictos-area">
    @for (picto of pictogramas(); track picto.id) {
      <button class="picto-card" (click)="selecionarPictograma(picto)">

        <div class="picto-emoji">{{ picto}}</div>

        <div class="picto-info">
          <span class="picto-label">{{ picto.label }}</span>
          <span class="picto-uso">{{ picto}}x usado</span>
        </div>

      </button>
    }
  </section>

  <!-- Loading -->
  @if (loading()) {
    <div class="loading-center">
      <div class="spinner"></div>
    </div>
  }

  <!-- Erro -->
  @if (error()) {
    <div class="alert-erro">
      {{ error() }}
    </div>
  }
</div>
