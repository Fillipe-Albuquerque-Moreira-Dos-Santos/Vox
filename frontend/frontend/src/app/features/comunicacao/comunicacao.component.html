<div class="comunicacao-container"
     [class.dark]="modoEscuro()"
     [class.high-contrast]="modoAltoContraste()">

  <!-- Barra de mensagem -->
  <div class="mensagem-bar bg-white/60 dark:bg-gray-800/50">
    <h2 class="font-bold text-lg mb-2">Mensagem</h2>

    <!-- Pictogramas selecionados -->
    <div class="pictos-selecionados">
      @for (item of pictogramasSelecionados(); track item.pictograma.id) {
        <div class="pictograma-item">
          <div class="text-4xl">{{ item.pictograma.label }}</div>
        </div>
      }
    </div>

    <!-- Texto completo -->
    <div class="texto-completo mt-4 bg-white/30 dark:bg-gray-700/40">
      {{ textoCompleto() }}
    </div>

    <!-- AÃ§Ãµes -->
    <div class="grid grid-cols-2 gap-3 mt-4">
      <button class="acao-btn bg-green-500 text-white"
              (click)="falarMensagem()">
        ðŸ”Š Falar
      </button>

      <button class="acao-btn bg-blue-500 text-white"
              (click)="limparSelecao()">
        ðŸ§¹ Limpar
      </button>
    </div>
  </div>

  <!-- CATEGORIAS -->
  <div class="flex gap-3 overflow-x-auto py-3">
    @for (categoria of categorias(); track categoria.id) {
      <button
        class="categoria-tab"
        [class.active]="categoriaSelecionada()?.id === categoria.id"
        [style.background-color]="categoria.cor"
        (click)="selecionarCategoria(categoria)">
        {{ categoria.nome }}
      </button>
    }
  </div>

  <!-- LISTA DE PICTOGRAMAS -->
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 mt-4">
    @for (picto of pictogramas(); track picto.id) {
      <button class="pictograma-btn bg-white/20 dark:bg-gray-700/30"
              (click)="selecionarPictograma(picto)">
        <div class="pictograma-emoji text-4xl text-center">
          {{ picto.label }}
        </div>
      </button>
    }
  </div>

  <!-- Loading -->
  @if (loading()) {
    <div class="flex justify-center mt-6">
      <div class="loading-spinner"></div>
    </div>
  }

  <!-- Erro -->
  @if (error()) {
    <div class="alert-erro mt-6">
      {{ error() }}
    </div>
  }
</div>
